---
import BaseLayout from "../layouts/BaseLayout.astro";

const modules = import.meta.glob("./blog/*.md", { eager: true });
const posts = Object.values(modules);

posts.sort(
  (a, b) =>
    new Date((b as any).frontmatter.date).getTime() -
    new Date((a as any).frontmatter.date).getTime()
);

const latest = posts[0];
---

<BaseLayout>
  <section class="about">
    <h2>ðŸ˜¸ About Andrew</h2>

    <div class="about-grid">
      <figure class="about-photo">
        <img
          src="/assets/images/andrew.jpg"
          alt="Photo of Andrew sitting on a bench"
          width="420"
          height="560"
          loading="eager"
          decoding="async"
        />
      </figure>

      <div class="about-text">
        <p>
          Hello, I'm Andrew Pollack-Gray! I like the parts of software that
          make everything else possible: build systems, infrastructure,
          CI/CD, and the invisible mechanics of developer productivity.
        </p>

        <p>
          I'm currently working at
          <a href="https://www.anyscale.com/">Anyscale</a>
          as part of the Release and Engineering Efficiency (REEf) team.
        </p>

        <p>
          Outside of work, I play the Euphonium and try to get better at
          cooking. I also love to tinker with personal automations on a
          <a
            href="https://github.com/andrewpollack/pi-infrastructure?tab=readme-ov-file#pi-infrastructure"
          >
            Raspberry Pi cluster
          </a>.
          My favorite is a series of
          <a
            href="https://github.com/andrewpollack/pi-infrastructure?tab=readme-ov-file#meals-go--meals-frontend/"
          >
            grocery list automations
          </a>
          that my wife and I use all the time. This type of automation
          brings me endless joy.
        </p>
      </div>
    </div>
  </section>

  <hr />

  <section>
    <h2>Blog</h2>
    <p>
      A collection of insights and lessons learned from both personal
      projects and professional experience.
    </p>

    {latest ? (
      <>
        <h3>
          <a href={(latest as any).url}>
            {(latest as any).frontmatter.title}
          </a>
        </h3>
        <h4>{(latest as any).frontmatter.date}</h4>
      </>
    ) : (
      <p>No posts yet.</p>
    )}
  </section>
</BaseLayout>
